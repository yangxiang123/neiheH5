(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-market-orderdetail"],{"05cb":function(t,e,i){"use strict";var a=i("23e6"),n=i.n(a);n.a},"23e6":function(t,e,i){var a=i("6074");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("06ed5dfc",a,!0,{sourceMap:!1,shadowMode:!1})},4356:function(t,e,i){"use strict";i.r(e);var a=i("dd85"),n=i("9992");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("05cb");var o=i("f0c5"),r=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"8e970472",null,!1,a["a"],void 0);e["default"]=r.exports},6074:function(t,e,i){var a=i("24fb"),n=i("1de5"),s=i("c5a9");e=a(!1);var o=n(s);e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.bot_bg[data-v-8e970472]{background-color:#fff;border-radius:%?30?% %?30?% 0 0;position:relative;bottom:%?30?%}.close[data-v-8e970472]{margin-right:%?20?%;background:transparent;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:%?2?% solid #000;-webkit-border-radius:%?20?%;-moz-border-radius:%?20?%;border-radius:%?20?%;color:#000;font-weight:400;font-size:%?28?%;letter-spacing:%?1?%;width:%?230?%;height:%?88?%;text-align:center;line-height:%?88?%}.top_hei[data-v-8e970472]{width:100%;height:%?320?%;background:url('+o+") no-repeat 50%;background-size:100% 100%;text-align:center}.top_hei .nav[data-v-8e970472]{padding-top:%?100?%;font-weight:700;font-size:%?44?%;line-height:%?60?%;color:#fff}.top_hei .hui[data-v-8e970472]{margin-top:%?20?%;font-style:normal;font-size:%?24?%;line-height:%?34?%;font-weight:400;text-align:center;letter-spacing:%?3?%;color:hsla(0,0%,100%,.6)}.input[data-v-8e970472]{background:#f6f6f6;border-radius:%?163?%;padding:%?20?% %?38?%;margin-bottom:%?40?%}.left[data-v-8e970472]{display:inline-block;margin-top:%?23?%;padding:0 %?8?%;height:%?36?%;font-style:normal;font-weight:700;font-size:%?24?%;line-height:%?36?%;color:#441c02;background:linear-gradient(23.86deg,#ffccb8 -15.3%,#ffc582 96.5%)}.right[data-v-8e970472]{display:inline-block;margin-top:%?23?%;padding:0 %?8?%;height:%?36?%;font-style:normal;font-weight:700;font-size:%?24?%;line-height:%?36?%;color:#b47528;background:rgba(240,213,182,.24)}",""]),t.exports=e},9992:function(t,e,i){"use strict";i.r(e);var a=i("b578"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},b578:function(t,e,i){"use strict";(function(t){i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("99af"),i("d3b7"),i("159b");var n=a(i("207f")),s=a(i("1d9b")),o={components:{jpCoded:n.default},data:function(){return{id:"",payType:0,all:{goods:{}},timer:null,timeEnd:"",modalName:"",codes:"",width:600,pwd:"",list:[],link_url:"",code:"",show:!1,order_sns:[]}},onLoad:function(e){this.order_sns=e.id?JSON.parse(e.id):"",t("log",this.order_sns," at pages/market/orderdetail.vue:223"),e.id&&(this.id=this.order_sns[this.order_sns.length-1]),this.getinfo()},onPullDownRefresh:function(){this.all={goods:{}},this.getinfo()},methods:{getlist:function(){var t=this;this.util.request("user/signed_bank_card",{}).then((function(e){uni.stopPullDownRefresh(),t.list=t.list.concat(e)}))},close_pay:function(){var e=this;uni.showModal({content:"是否取消订单",success:function(i){i.confirm?(t("log","用户点击确定"," at pages/market/orderdetail.vue:251"),e.util.request("order/cancel_order",{order_sn:e.id}).then((function(t){e.getinfo()}))):i.cancel&&t("log","用户点击取消"," at pages/market/orderdetail.vue:259")}})},clearPwd:function(){this.$refs.pwd.clear()},submit:function(){var t=this;this.util.request("pay/heepay_confirm_pay",{hy_token_id:this.link_url,code:this.code}).then((function(e){t.show=!1,t.util.showMsg("支付成功"),setTimeout((function(){uni.navigateBack({delta:1})}),1500)}))},paySubmit2:function(){var t=this;0==this.payType?this.getPass():-1==this.payType?this.util.getUserInfo().then((function(e){t.util.request("pay/pay_ment",{order_sn:t.id,pay_type:"bank"}).then((function(t){window.location.href=t.url}))})):-2==this.payType?this.util.getUserInfo().then((function(e){t.util.request("pay/pay_ment",{order_sn:t.id,pay_type:"adapay_alipay",user_id:e.user_id,card:t.payType}).then((function(t){window.location.href=t.response}))})):this.util.getUserInfo().then((function(e){t.util.request("pay/pay_ment",{order_sn:t.id,pay_type:"heepay",user_id:e.user_id,card:t.payType}).then((function(e){t.link_url=e.url,t.show=!0}))}))},paySubmit:function(){var e=this;0==this.payType?this.getPass():1==this.payType||2==this.payType?this.util.getUserInfo().then((function(t){e.util.request("pay/pay_ment",{order_sn:e.id,pay_type:2==e.payType?"bank":"sd",user_id:t.user_id}).then((function(t){uni.setStorageSync("url",t.url),e.util.urlTo("../pay/pay")}))})):3==this.payType&&(this.util.getUserInfo().then((function(t){e.util.request("pay/pay_ment",{order_sn:e.id,pay_type:"quick_alipay",user_id:t.user_id,client_type:"h5"}).then((function(t){uni.setStorageSync("link",t.url.data),e.util.urlTo("../pay/base")}))})),t("log",0x3f28cb71571c7," at pages/market/orderdetail.vue:389"))},getPass:function(){var t=this;this.util.getUserInfo().then((function(e){1==e.pay_pwd?t.modalName="payModal":t.util.showMsg("您还未设置支付密码",1e3,t.util.urlTo("../my/psd"))}))},inputVal:function(e){t("log",e," at pages/market/orderdetail.vue:403");var i=this;this.pwd=e,6==e.length&&uni.request({url:"".concat(s.default.apis,"/api/user/check_pay_available"),data:{paypwd:e},method:"POST",header:{"content-type":"application/x-www-form-urlencoded","Accept-Language":"zh-cn",token:uni.getStorageSync("token")},success:function(e){t("log",e," at pages/market/orderdetail.vue:447"),i.modalName=null,1==e.data.code?i.pay2():uni.showModal({content:"支付密码错误，请重试",confirmText:"重试",cancelText:"忘记密码",success:function(e){e.confirm?(t("log","用户点击确定"," at pages/market/orderdetail.vue:458"),i.modalName="payModal"):e.cancel&&(t("log","用户点击取消"," at pages/market/orderdetail.vue:461"),uni.navigateTo({url:"/pages/my/psd"}))}})},fail:function(t){i.showToast("加载失败，请检查网络")}})},pay2:function(){var t=this;this.order_sns.forEach((function(e){t.util.request("order/order_pay",{order_sn:e,pay_type:"balance",paypwd:t.pwd}).then((function(e){t.modalName=null}))})),this.util.showMsg("支付成功"),setTimeout((function(){uni.switchTab({url:"/pages/market/index"})}),1500)},getinfo:function(){var e=this;this.util.request("order/order_details",{order_sn:this.id},"POST").then((function(i){uni.stopPullDownRefresh(),e.all=i,t("log",i," at pages/market/orderdetail.vue:503");var a=e;e.timer=setInterval((function(){a.timeEnd=a.util.secChange(a.all.residue),0==a.all.residue&&a.util.request("order/cancel_find",{order_sn:a.all.order_sn}).then((function(t){clearInterval(a.timer),a.getinfo()})),a.all.residue--}),1e3)}))}}};e.default=o}).call(this,i("0de9")["log"])},dd85:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={uPopup:i("0e3c").default,uInput:i("9c88").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{},[a("v-uni-view",{staticClass:"top_hei"},[a("v-uni-view",{staticClass:"nav"},[t._v(t._s(t.all.order_status_text))]),0==t.all.order_status?a("v-uni-view",{staticClass:"hui"},[t._v("剩余支付时间:"+t._s(t.timeEnd))]):t._e()],1),a("v-uni-view",{staticClass:"padding bot_bg"},[a("v-uni-view",{staticClass:"flex align-center margin-top-sm bg-white pad24 radius20"},[a("v-uni-image",{staticStyle:{width:"160rpx",height:"160rpx","border-radius":"20rpx"},attrs:{src:t.all.goods.goods_image,mode:"aspectFill"}}),a("v-uni-view",{staticClass:"padding-left-sm flex-sub"},[a("v-uni-view",{staticClass:"font30"},[t._v(t._s(t.all.goods.goods_name))]),a("v-uni-view",{staticClass:"flex align-center flex-sub",staticStyle:{"margin-top":"48rpx"}},[a("v-uni-view",{staticClass:"flex align-center flex-sub",staticStyle:{"font-size":"20rpx"}},[a("v-uni-view",{staticClass:"left flex justify-center align-center"},[t._v("编号")]),a("v-uni-view",{staticClass:"right flex justify-center align-center text-white"},[t._v(t._s(t.all.goods_code))])],1),a("v-uni-view",{staticClass:"font32",staticStyle:{color:"#3b3f47"}},[t._v("￥"+t._s(t.all.order_amount))])],1)],1)],1),a("v-uni-view",{staticClass:"bg-white radius20 margin-top-sm",staticStyle:{padding:"32rpx 41rpx"}},[a("v-uni-view",{staticClass:"font30"},[t._v("订单信息")]),a("v-uni-view",{staticClass:"font26 col-999",staticStyle:{"margin-top":"32rpx"}},[t._v("订单金额：￥"+t._s(t.all.order_amount))]),t._l(t.order_sns,(function(e,n){return a("v-uni-view",{key:n,staticClass:"font26 col-999",staticStyle:{"margin-top":"32rpx"}},[t._v("订单编号："+t._s(e)),a("v-uni-image",{staticStyle:{width:"20rpx",height:"22rpx","margin-left":"10rpx"},attrs:{src:i("7edc"),mode:""},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.util.copy(e)}}})],1)})),a("v-uni-view",{staticClass:"font26 col-999",staticStyle:{"margin-top":"23rpx"}},[t._v("创建时间："+t._s(t.all.order_time_text))]),"已完成"==t.all.order_status_text?a("v-uni-view",{staticClass:"font26 col-999",staticStyle:{"margin-top":"23rpx"}},[t._v("付款时间："+t._s(t.all.pay_time_text))]):t._e(),"已完成"==t.all.order_status_text?a("v-uni-view",{staticClass:"font26 col-999",staticStyle:{"margin-top":"23rpx"}},[t._v("支付方式："+t._s(t.all.pay_type_text))]):t._e()],2),0==t.all.order_status?a("v-uni-view",{staticClass:"bg-white radius20 margin-top-sm",staticStyle:{padding:"39rpx 44rpx","padding-bottom":"41rpx"}},[a("v-uni-view",{staticClass:"font32"},[t._v("支付方式")]),a("v-uni-view",{staticClass:"flex align-center margin-top",staticStyle:{"margin-top":"51rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payType=0}}},[a("v-uni-image",{staticStyle:{width:"64upx",height:"64upx"},attrs:{src:i("877c"),mode:""}}),a("v-uni-view",{staticClass:"margin-left-sm flex-sub font30"},[t._v("余额")]),a("v-uni-radio",{staticStyle:{transform:"scale(.7)"},attrs:{checked:0==t.payType,color:"#3b3f47"}})],1),a("v-uni-view",{staticClass:"flex align-center margin-top",staticStyle:{"margin-top":"51rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payType=-1}}},[a("v-uni-image",{staticStyle:{width:"64upx",height:"64upx"},attrs:{src:"/static/yhk.png",mode:""}}),a("v-uni-view",{staticClass:"margin-left-sm flex-sub font30"},[t._v("杉德支付")]),a("v-uni-radio",{staticStyle:{transform:"scale(.7)"},attrs:{checked:-1==t.payType,color:"#3b3f47"}})],1)],1):t._e(),a("v-uni-view",{staticStyle:{height:"120rpx"}}),0==t.all.order_status?a("v-uni-view",{staticClass:"foot-box flex align-center justify-between bg-white",staticStyle:{padding:"24rpx 28rpx"}},[a("v-uni-view",{staticClass:"close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close_pay.apply(void 0,arguments)}}},[t._v("取消支付")]),a("v-uni-view",{staticClass:"btnbggg",staticStyle:{width:"400rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.paySubmit2.apply(void 0,arguments)}}},[t._v("确定支付")])],1):t._e()],1),a("v-uni-view",{staticClass:"cu-modal",class:"payModal"==t.modalName?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg292B2B justify-end"},[a("v-uni-view",{staticClass:"content"},[t._v("请输入操作密码")]),a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.modalName="",t.clearPwd()}}},[a("v-uni-text",{staticClass:"cuIcon-close text-black"})],1)],1),"payModal"==t.modalName?a("v-uni-view",{staticClass:"padding-top padding-bottom-xl"},[a("validcode",{ref:"pwd",attrs:{maxlength:6,isPwd:!0},on:{finish:function(e){arguments[0]=e=t.$handleEvent(e),t.inputVal.apply(void 0,arguments)}}})],1):t._e()],1)],1),a("u-popup",{attrs:{mode:"center","border-radius":"25",closeable:!0,width:"300px",height:"300px"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-uni-view",{staticStyle:{padding:"50rpx 40rpx","padding-top":"80rpx"}},[a("v-uni-view",{staticClass:"input"},[a("u-input",{attrs:{type:"text",disabled:!0,maxlength:"11"},model:{value:t.link_url,callback:function(e){t.link_url=e},expression:"link_url"}})],1),a("v-uni-view",{staticClass:"input"},[a("u-input",{attrs:{type:"number",placeholder:"请输入验证码","password-icon":!1},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),a("v-uni-view",{staticClass:"btnbggg",staticStyle:{width:"100%","margin-top":"80rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("提交")])],1)],1)],1)},s=[]}}]);